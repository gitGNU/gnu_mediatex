@cindex collection

Theses 2 scripts manage collection subscribing/unsubscribing.
@note{} if local host is the collection master host, theses scripts also manage the creation/destruction of the collection.
The third script clean the @acronym{HTML} catalogue.

@image{mediatex-figures/new-free-clean,,,,}

Process conceptual model:
@itemize @bullet

@item Events in
@table @code

@item @eventScriptsNew
@itemx @eventScriptsFree
from @procClientConf{}: manage collection subscribing/unsubscribing.

@item @eventScriptsClean
from @procClientMisc{}: clean the @acronym{HTML} catalogue.

@end table

@item Processing
@itemize @bullet
@item 
Manage @code{mdtx-COLL} collection system user and group.
@item
Manage the collection's repositories.
@item
Setup the @acronym{CVSROOT} module for a new collection or connect to a 
remote @acronym{CVSROOT} module to join an already existing collection.
@end itemize

@item Events out
@table @code

@item @eventScriptsBindCall
to @procScriptsBind{}: make collection repository accessible from the chrooted jail for @acronym{SSH} remote access.

@item @eventToolsCvsImport
@itemx @eventToolsCvsCheckout
to @procToolsCvs{}: respectively create or join a new @acronym{CVS} module.

@end table
@item Data in/out
@itemize @bullet
@item @dataConf
@end itemize

@item Data out
@itemize @bullet
@item @dataServers
@item @dataCatalog
@item @dataExtract
@end itemize

@item Other files involved:
@example
/
|- etc/
|  +- mediatex/
|     + mdtx-COLL             (symlink -> 1)
|- var/
   +- lib/
   |  +- mediatex/
   |     +- mdtx/                       
   |       |- CVSROOT/
   |       +- mdtx-COLL/                
   |          |- apache2/
   |          |- catalog00.txt,v
   |          |- extract00.txt,v
   |          +- servers.txt,v
   +- cache/
      +- mediatex/
         +- mdtx/
            |- cache/                   
            |  +- mdtx-COLL/
            |- cvs/
            |  +- mdtx-COLL/             (1)
            |     |- apache2/
            |     |- catalog00.txt
            |     |- extract00.txt
            |     +- servers.txt
            |- jail/
            |  +- var/
            |     |- lib        
            |     |  +- mdtx-COLL/
            |     |- cache      
            |        +- mdtx-COLL/
            |- md5sums/
            |  +- mdtx-COLL.md5
            |- tmp/
            +- home/
               +- mdtx-COLL/
                  |- .ssh/
                  +- public_html/
@end example
@end itemize

Exemples:
@itemize @bullet
@item Create a new collection: @pxref{Scenario 2}.
@item Join an already existing collection: @pxref{Scenario 5}.
@end itemize

Code:
@table @file
@item /usr/share/mediatex/scripts/new.sh
@itemx /usr/share/mediatex/scripts/free.sh
@itemx /usr/share/mediatex/scripts/clean.sh
@itemx /usr/share/mediatex/scripts/lib/cvs.sh
@itemx /usr/share/mediatex/scripts/lib/htdocs.sh
@itemx /usr/share/mediatex/scripts/lib/ssh.sh
@itemx /usr/share/mediatex/scripts/lib/users.sh
@end table
